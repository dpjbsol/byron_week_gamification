<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <title>byron.week · Gamificação</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link id="app-css" href="./assets/styles.css" rel="stylesheet" />
</head>
<body>
  <header class="app-header">
    <h1>byron.week · Gamificação</h1>
    <nav class="tabs">
      <a href="#/presence">Palestra</a>
      <a href="#/workshop">Oficina</a>
      <a href="#/component">Componentes</a>
      <a href="#/dpj">Validações DPJ</a>
      <a href="#/ranking">Ranking</a>
      <a href="#/logs">Auditoria</a>
      <a href="#/settings">Configurações</a>
    </nav>
  </header>

  <main id="app"></main>

  <footer class="app-footer">
    <small>Funciona 100% local (sem backend). Horário: America/Sao_Paulo.</small>
  </footer>

  <script type="module">
    // Uma versão única para TODOS os imports desta aba
    const V = `v=${Date.now().toString(36)}`;
    window.APP_V = V;

    // (Opcional) forçar recarregar o CSS junto
    const css = document.getElementById("app-css");
    if (css && !css.href.includes("?")) css.href = `${css.href}?${V}`;

    // Importa módulos com a mesma versão (evita cache de JS)
    await import(`./js/utils.js?${V}`);
    const { initStorage } = await import(`./js/storage.js?${V}`);
    const { rtInit }      = await import(`./js/realtime.js?${V}`);
    const { mountApp }    = await import(`./js/app.js?${V}`);

    initStorage();
    rtInit();
    mountApp(document.getElementById("app"));
  </script>
</body>
</html>
